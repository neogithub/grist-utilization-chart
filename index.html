<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Utilization Chart</title>
    <script src="https://docs.getgrist.com/grist-plugin-api.js"></script>
    <style>
        #debug {
            padding: 10px;
            margin: 10px;
            background: #f0f0f0;
            border: 1px solid #ccc;
            font-family: monospace;
            white-space: pre-wrap;
        }
    </style>
</head>
<body>
    <div id="debug">Page loaded at: <script>document.write(new Date().toISOString())</script></div>

    <script>
        function addDebugMessage(msg) {
            const debug = document.getElementById('debug');
            debug.innerHTML += '\n' + new Date().toISOString() + ': ' + msg;
        }

        // Let's verify the Grist API is available
        if (typeof grist === 'undefined') {
            addDebugMessage('ERROR: Grist API not found');
        } else {
            addDebugMessage('Grist API found');
            
            // Try to initialize Grist
            grist.ready({
                requiredAccess: 'read'
            }).then(() => {
                addDebugMessage('Grist ready success');
                
                // Subscribe to records
                grist.onRecords(records => {
                    addDebugMessage('Received records: ' + records.length);
                    addDebugMessage('First record: ' + JSON.stringify(records[0]));
                });
                
            }).catch(err => {
                addDebugMessage('ERROR in grist.ready: ' + err.message);
            });
        }

        // Add error handler
        window.onerror = function(msg, url, lineNo, columnNo, error) {
            addDebugMessage('ERROR: ' + msg);
            return false;
        };
    </script>
</body>
</html>